<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0"
    />
    <title>üíù –ù–∞—Å—Ç—é—à–∫–∞, –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–∞ —Å —Å—é—Ä–ø—Ä–∏–∑–æ–º!</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background: linear-gradient(
          145deg,
          #ffb6c1 0%,
          #ffc0cb 40%,
          #ffe4e1 100%
        );
        font-family: "Segoe UI", Roboto, sans-serif;
        height: 100vh;
        width: 100vw;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        margin: 0;
        transition: background 0.6s ease;
      }

      /* –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω */
      .container {
        position: relative;
        z-index: 20;
        max-width: 750px;
        width: 90%;
        text-align: center;
      }

      .screen {
        background: rgba(255, 240, 245, 0.75);
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
        border-radius: 60px 20px 60px 20px;
        padding: 3rem 2rem;
        box-shadow:
          0 20px 40px rgba(190, 80, 100, 0.3),
          inset 0 2px 8px rgba(255, 255, 255, 0.9);
        border: 2px solid rgba(255, 220, 240, 0.7);
      }

      .hidden {
        display: none !important;
      }

      h1 {
        font-size: clamp(2.2rem, 8vw, 3.4rem);
        font-weight: 800;
        color: #9f2b2b;
        text-shadow:
          4px 4px 0 #ffb8c6,
          0 6px 16px rgba(255, 80, 120, 0.4);
        letter-spacing: 2px;
        margin-bottom: 40px;
        word-break: break-word;
      }

      #success-screen h1 {
        margin-bottom: 0;
        animation: glitch 0.5s infinite alternate;
      }

      @keyframes glitch {
        0% {
          transform: skew(0deg);
          text-shadow: 3px 3px 0 #ffa07a;
        }
        100% {
          transform: skew(-1.5deg, 1.2deg);
          text-shadow: 7px 5px 0 #ff69b4;
        }
      }

      /* –∫–Ω–æ–ø–∫–∏ */
      .buttons {
        position: relative;
        width: 100%;
        height: 90px;
        margin: 0 auto;
      }

      .btn {
        position: absolute;
        padding: 14px 40px;
        font-size: 1.9rem;
        font-weight: bold;
        border: none;
        border-radius: 80px;
        cursor: pointer;
        transition: all 0.2s ease;
        box-shadow:
          0 14px 0 rgba(0, 0, 0, 0.1),
          0 10px 22px rgba(170, 50, 70, 0.3);
        letter-spacing: 5px;
        border: 2px solid rgba(255, 255, 255, 0.9);
        min-width: 160px;
      }

      .yes {
        background: linear-gradient(145deg, #ff4f5e, #c72a3a);
        color: white;
        left: 8%;
      }

      .no {
        background: linear-gradient(145deg, #909090, #5e5e5e);
        color: #ffe9e9;
        left: 58%;
        transition:
          left 0.15s ease-out,
          top 0.15s ease-out,
          background 0.2s;
      }

      .btn:hover {
        transform: scale(1.05);
        filter: brightness(1.1);
      }

      .yes:active {
        transform: scale(0.96);
        box-shadow: 0 6px 0 rgba(0, 0, 0, 0.1);
      }

      /* –ø–æ–¥–º–∏–≥–∏–≤–∞—é—â–∏–π —Å–º–∞–π–ª üòú */
      .funny-emoji {
        position: fixed;
        bottom: 25px;
        left: 25px;
        font-size: 52px;
        cursor: pointer;
        z-index: 200;
        filter: drop-shadow(0 10px 12px rgba(200, 60, 80, 0.5));
        transition: transform 0.2s;
        animation: wiggle 2.8s infinite;
      }
      .funny-emoji:hover {
        transform: scale(1.3) rotate(8deg);
      }
      @keyframes wiggle {
        0%,
        100% {
          transform: rotate(-4deg);
        }
        50% {
          transform: rotate(10deg);
        }
      }

      /* –∫—Ä–µ—Å—Ç–∏–∫–∏ (–Ω–∞ –Ω–µ—Ç) */
      .cross {
        position: fixed;
        color: #ff3333;
        font-size: 38px;
        font-weight: bold;
        text-shadow: 0 0 12px #ff0000;
        z-index: 9999;
        pointer-events: none;
        animation: crossFall 2.2s linear forwards;
        user-select: none;
      }
      @keyframes crossFall {
        0% {
          transform: translateY(-20px) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translateY(100vh) rotate(480deg);
          opacity: 0;
        }
      }

      /* –¥–æ–∂–¥—å (canvas) */
      #rain-canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 15;
        display: block;
      }

      /* –º—É–∑—ã–∫–∞–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ */
      .music-control {
        position: fixed;
        bottom: 25px;
        right: 25px;
        width: 60px;
        height: 60px;
        background: rgba(255, 200, 210, 0.8);
        backdrop-filter: blur(8px);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 36px;
        cursor: pointer;
        z-index: 200;
        box-shadow: 0 8px 18px rgba(180, 50, 70, 0.4);
        border: 2px solid rgba(255, 255, 255, 0.9);
        transition: 0.2s;
      }
      .music-control:hover {
        transform: scale(1.15);
        background: rgba(255, 160, 180, 0.9);
      }

      @media (max-width: 600px) {
        .screen {
          padding: 2rem 1rem;
        }
        .btn {
          padding: 12px 22px;
          font-size: 1.6rem;
          min-width: 130px;
        }
        h1 {
          font-size: 2rem;
        }
        .funny-emoji {
          font-size: 44px;
          bottom: 15px;
          left: 15px;
        }
        .music-control {
          width: 52px;
          height: 52px;
          font-size: 32px;
          bottom: 15px;
          right: 15px;
        }
      }
    </style>
  </head>
  <body>
    <!-- –ü–û–î–ú–ò–ì–ò–í–ê–Æ–©–ò–ô –°–ú–ê–ô–õ (–§–¢–®–ï–ß–ö–ê) -->
    <div id="winky-emoji" class="funny-emoji" title="–ü—Ä–∏–≤–µ—Ç! –Ø –ø–æ–¥–º–∏–≥–∏–≤–∞—é üòâ">
      üòú
    </div>

    <!-- –ö–ù–û–ü–ö–ê –ú–£–ó–´–ö–ò -->
    <div id="music-toggle" class="music-control" title="–í–∫–ª/–≤—ã–∫–ª –º—É–∑—ã–∫—É">
      üîä
    </div>

    <!-- –û–°–ù–û–í–ù–û–ô –ò–ù–¢–ï–†–§–ï–ô–° -->
    <div class="container">
      <div id="valentine-screen" class="screen">
        <h1>‚ù§Ô∏è –ù–∞—Å—Ç—é—à–∫–∞,<br />–±—É–¥–µ—à—å –º–æ–µ–π –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π?</h1>
        <div class="buttons" id="button-container">
          <button id="yes-btn" class="btn yes">–î–ê</button>
          <button id="no-btn" class="btn no">–ù–ï–¢</button>
        </div>
      </div>
      <div id="success-screen" class="screen hidden">
        <h1>üéâ –£–†–ê!!!!!!!!! üéâ</h1>
      </div>
    </div>

    <canvas id="rain-canvas" class="hidden"></canvas>

    <script>
      (function () {
        "use strict";

        // ------------------------------------------------------------
        // 1. –§–û–¢–û ‚Äî –£–ú–ù–ê–Ø –ó–ê–ì–†–£–ó–ö–ê (–ø—Ä–æ–±—É–µ–º .jpg ‚Üí .jpeg ‚Üí .png)
        // ------------------------------------------------------------
        const PHOTO_COUNT = 30;
        let loadedPhotos = []; // —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–æ—Ç–æ
        let loadedHearts = []; // —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Ä–¥–µ—á–∫–∏

        // –ø—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏
        function loadPhoto(index) {
          return new Promise((resolve) => {
            const basePath = `photos/${index}`;
            const extensions = ["jpg", "jpeg", "png"];
            let attempt = 0;

            function tryNext() {
              if (attempt >= extensions.length) {
                console.warn(`‚ö†Ô∏è –§–æ—Ç–æ ${index} –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, —Å–æ–∑–¥–∞—é –∑–∞–≥–ª—É—à–∫—É`);
                resolve(
                  createFallbackImage(130, 130, `‚ù§Ô∏è ${index}`, "#ff6b8b"),
                );
                return;
              }
              const img = new Image();
              img.crossOrigin = "anonymous";
              img.src = `${basePath}.${extensions[attempt]}`;
              img.onload = () => {
                console.log(
                  `‚úÖ –§–æ—Ç–æ ${index}.${extensions[attempt]} –∑–∞–≥—Ä—É–∂–µ–Ω–æ`,
                );
                resolve(img);
              };
              img.onerror = () => {
                attempt++;
                tryNext();
              };
            }
            tryNext();
          });
        }

        // –∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Ñ–æ—Ç–æ
        function createFallbackImage(w, h, text, color) {
          const canvas = document.createElement("canvas");
          canvas.width = w;
          canvas.height = h;
          const cctx = canvas.getContext("2d");
          cctx.beginPath();
          cctx.arc(w / 2, h / 2, w / 2.4, 0, 2 * Math.PI);
          cctx.fillStyle = color;
          cctx.shadowColor = "rgba(255,80,120,0.7)";
          cctx.shadowBlur = 14;
          cctx.fill();
          cctx.shadowBlur = 0;
          cctx.fillStyle = "white";
          cctx.font = 'bold 44px "Segoe UI", Arial';
          cctx.textAlign = "center";
          cctx.textBaseline = "middle";
          cctx.fillText(text, w / 2, h / 2);
          const img = new Image();
          img.src = canvas.toDataURL("image/png");
          return img;
        }

        // –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–µ—Ä–¥–µ—á–∫–∏ (–≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤—ã)
        function createHeartImage(size) {
          const canvas = document.createElement("canvas");
          canvas.width = size;
          canvas.height = size;
          const cctx = canvas.getContext("2d");
          cctx.fillStyle = "#ff4d6d";
          cctx.shadowColor = "#ffb3c6";
          cctx.shadowBlur = 14;
          cctx.beginPath();
          cctx.moveTo(size / 2, size / 4);
          cctx.bezierCurveTo(
            size / 2 - size / 4,
            size / 6,
            0,
            size / 2.5,
            size / 2,
            size - size / 8,
          );
          cctx.bezierCurveTo(
            size,
            size / 2.5,
            size - size / 4,
            size / 6,
            size / 2,
            size / 4,
          );
          cctx.closePath();
          cctx.fill();
          cctx.shadowBlur = 8;
          cctx.fillStyle = "#ff8c9a";
          cctx.beginPath();
          cctx.moveTo(size / 2.3, size / 3.2);
          cctx.bezierCurveTo(
            size / 2.6,
            size / 4.5,
            size / 3.2,
            size / 4,
            size / 2.2,
            size / 3.8,
          );
          cctx.fill();
          const img = new Image();
          img.src = canvas.toDataURL("image/png");
          return img;
        }

        // ------------------------------------------------------------
        // 2. –ú–£–ó–´–ö–ê ‚Äî –í–°–¢–†–û–ï–ù–ù–´–ô –°–ò–ù–¢–ï–ó (Web Audio) + –ª–æ–∫–∞–ª—å–Ω—ã–π fallback
        // ------------------------------------------------------------
        let audioCtx = null;
        let isMusicPlaying = false;
        let musicGainNode = null;
        let musicOscillator = null;
        let musicInterval = null;

        function initAudioContext() {
          if (audioCtx) return;
          audioCtx = new (window.AudioContext || window.webkitAudioContext)();
          musicGainNode = audioCtx.createGain();
          musicGainNode.gain.setValueAtTime(0.25, audioCtx.currentTime); // –≥—Ä–æ–º–∫–æ—Å—Ç—å
          musicGainNode.connect(audioCtx.destination);
        }

        // –∏–≥—Ä–∞–µ–º –º–µ–ª–æ–¥–∏—é –∏–∑ 8-–±–∏—Ç–Ω—ã—Ö –Ω–æ—Ç (—Ä–æ–º–∞–Ω—Ç–∏—á–Ω–∞—è —Ç–µ–º–∞)
        function startSynthMusic() {
          if (!audioCtx) initAudioContext();
          if (audioCtx.state === "suspended") {
            audioCtx.resume().then(() => playSynthLoop());
          } else {
            playSynthLoop();
          }
          isMusicPlaying = true;
          document.getElementById("music-toggle").innerHTML = "üîä";
        }

        function playSynthLoop() {
          if (musicInterval) clearInterval(musicInterval);
          // –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ–º –ø—Ä–æ—Å—Ç—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–ª—è-–ª—è)
          const notes = [
            523.25, 659.25, 783.99, 523.25, 587.33, 659.25, 493.88, 523.25,
          ]; // C5 E5 G5 C5 D5 E5 B4 C5
          let step = 0;
          musicInterval = setInterval(() => {
            if (!isMusicPlaying) return;
            const osc = audioCtx.createOscillator();
            osc.type = "sine";
            osc.frequency.value = notes[step % notes.length];
            const gain = audioCtx.createGain();
            gain.gain.value = 0.15;
            osc.connect(gain);
            gain.connect(musicGainNode);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.35);
            step++;
          }, 450);
        }

        function stopSynthMusic() {
          isMusicPlaying = false;
          if (musicInterval) {
            clearInterval(musicInterval);
            musicInterval = null;
          }
        }

        // –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º—É–∑—ã–∫–∏
        function toggleMusic() {
          if (!audioCtx) initAudioContext();
          if (isMusicPlaying) {
            stopSynthMusic();
            document.getElementById("music-toggle").innerHTML = "üîá";
          } else {
            startSynthMusic();
            document.getElementById("music-toggle").innerHTML = "üîä";
          }
        }

        // ------------------------------------------------------------
        // 3. –§–¢–®–ï–ß–ù–´–ô –§–£–ù–ö–¶–ò–û–ù–ê–õ ‚Äî –ö–ù–û–ü–ö–ê –ù–ï–¢ –ü–†–ò–ö–ê–õ–´–í–ê–ï–¢–°–Ø
        // ------------------------------------------------------------
        const noBtn = document.getElementById("no-btn");
        const btnContainer = document.getElementById("button-container");
        const funnyPhrases = [
          "üòº –ö–æ—Ç–∏–∫ –ø—Ä–æ—Ç–∏–≤",
          "üê∂ –ì–∞–≤!",
          "ü¶Ü –ù–µ —Å–µ–≥–æ–¥–Ω—è",
          "üß∂ –£ –º–µ–Ω—è –ª–∞–ø–∫–∏",
          "üçï –Ø –∑–∞–Ω—è—Ç–∞",
          "üéÆ –î–∞–Ω—è –∑–æ–≤—ë—Ç",
          "üí§ –•–æ—á—É —Å–ø–∞—Ç—å",
          "ü§î –ü–æ–¥—É–º–∞—é...",
          "üëª –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë",
          "‚ùå –û–π, –≤—Å—ë!",
          "üòù –ù–µ –¥–æ–≥–æ–Ω–∏—à—å",
          "üéà –£–ª–µ—á—É",
        ];

        function moveNoButton() {
          const containerRect = btnContainer.getBoundingClientRect();
          const btnRect = noBtn.getBoundingClientRect();
          const maxLeft = Math.max(0, containerRect.width - btnRect.width);
          const maxTop = Math.max(0, containerRect.height - btnRect.height);
          let newLeft = Math.random() * maxLeft;
          let newTop = Math.random() * maxTop;
          noBtn.style.position = "absolute";
          noBtn.style.left = newLeft + "px";
          noBtn.style.top = newTop + "px";
        }

        // –º–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ —Å–ª—É—á–∞–π–Ω—É—é —Ñ—Ä–∞–∑—É –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
        noBtn.addEventListener("mouseenter", function () {
          moveNoButton();
          const randomPhrase =
            funnyPhrases[Math.floor(Math.random() * funnyPhrases.length)];
          noBtn.textContent = randomPhrase;
        });

        noBtn.addEventListener("touchstart", function (e) {
          e.preventDefault();
          moveNoButton();
          noBtn.textContent =
            funnyPhrases[Math.floor(Math.random() * funnyPhrases.length)];
        });

        // –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º "–ù–ï–¢" –∫–æ–≥–¥–∞ –º—ã—à–∫–∞ —É—Ö–æ–¥–∏—Ç
        noBtn.addEventListener("mouseleave", function () {
          noBtn.textContent = "–ù–ï–¢";
        });

        // ------------------------------------------------------------
        // 4. –ó–í–£–ö ¬´–ù–ï-–ê!¬ª –ü–†–ò –ö–õ–ò–ö–ï –ù–ê –ù–ï–¢ (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–π)
        // ------------------------------------------------------------
        function playNopeSound() {
          if (!audioCtx) initAudioContext();
          if (audioCtx.state === "suspended") audioCtx.resume();
          const osc = audioCtx.createOscillator();
          osc.type = "sawtooth";
          osc.frequency.setValueAtTime(220, audioCtx.currentTime);
          osc.frequency.exponentialRampToValue(110, audioCtx.currentTime + 0.2);
          const gain = audioCtx.createGain();
          gain.gain.setValueAtTime(0.2, audioCtx.currentTime);
          gain.gain.exponentialRampToValue(0.01, audioCtx.currentTime + 0.3);
          osc.connect(gain);
          gain.connect(audioCtx.destination);
          osc.start();
          osc.stop(audioCtx.currentTime + 0.3);
        }

        // –∫—Ä–µ—Å—Ç–∏–∫–∏ + –∑–≤—É–∫
        function spawnCrosses() {
          for (let i = 0; i < 70; i++) {
            const cross = document.createElement("div");
            cross.className = "cross";
            cross.innerHTML = "‚ùå";
            cross.style.left = Math.random() * 100 + "%";
            cross.style.top = -20 + "px";
            cross.style.fontSize = 25 + Math.random() * 45 + "px";
            cross.style.animationDuration = 1.5 + Math.random() * 2 + "s";
            document.body.appendChild(cross);
            setTimeout(() => cross.remove(), 2500);
          }
          playNopeSound(); // –æ–±–∏–∂–µ–Ω–Ω—ã–π –∑–≤—É–∫
        }

        noBtn.addEventListener("click", function (e) {
          e.preventDefault();
          e.stopPropagation();
          moveNoButton();
          noBtn.textContent =
            funnyPhrases[Math.floor(Math.random() * funnyPhrases.length)];
          spawnCrosses();
          return false;
        });

        // ------------------------------------------------------------
        // 5. –ü–û–î–ú–ò–ì–ò–í–ê–Æ–©–ò–ô –°–ú–ê–ô–õ (–±–µ–≥–∞–µ—Ç –≥–ª–∞–∑–∞–º–∏ –∑–∞ –∫—É—Ä—Å–æ—Ä–æ–º)
        // ------------------------------------------------------------
        const emoji = document.getElementById("winky-emoji");
        document.addEventListener("mousemove", (e) => {
          const x = (e.clientX / window.innerWidth) * 20 - 10;
          const y = (e.clientY / window.innerHeight) * 20 - 10;
          emoji.style.transform = `translate(${x}px, ${y}px) scale(1.1)`;
        });
        emoji.addEventListener("click", () => {
          emoji.innerHTML = "üòÜ";
          setTimeout(() => (emoji.innerHTML = "üòú"), 500);
        });

        // ------------------------------------------------------------
        // 6. –î–û–ñ–î–¨ –ò–ó –§–û–¢–û –ò –°–ï–†–î–ï–¶ (–ü–û–°–õ–ï –î–ê)
        // ------------------------------------------------------------
        const canvas = document.getElementById("rain-canvas");
        const ctx = canvas.getContext("2d");
        let particles = [];
        let animFrame = null;
        let canvasW, canvasH;

        function resizeCanvas() {
          canvasW = window.innerWidth;
          canvasH = window.innerHeight;
          canvas.width = canvasW;
          canvas.height = canvasH;
        }

        function initRainParticles() {
          particles = [];
          const allPhotos = loadedPhotos.filter(Boolean);
          const hearts = loadedHearts;
          const allImages = [...allPhotos, ...hearts];
          if (allImages.length === 0) {
            // —Å–æ–≤—Å–µ–º –Ω–∏—á–µ–≥–æ ‚Äî –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–µ—Ä–¥–µ—á–∫–∏ –Ω–∞ –ª–µ—Ç—É
            for (let i = 0; i < 5; i++) allImages.push(createHeartImage(90));
          }
          for (let i = 0; i < 90; i++) {
            const img = allImages[Math.floor(Math.random() * allImages.length)];
            particles.push({
              img: img,
              x: Math.random() * canvasW,
              y: Math.random() * canvasH - canvasH,
              speed: 1 + Math.random() * 4,
              size: 55 + Math.floor(Math.random() * 70),
              angle: Math.random() * 2 * Math.PI,
              rotSpeed: (Math.random() - 0.5) * 0.03,
              opacity: 0.8 + Math.random() * 0.2,
            });
          }
        }

        function drawRain() {
          if (!canvas || canvas.classList.contains("hidden")) return;
          ctx.clearRect(0, 0, canvasW, canvasH);
          particles.forEach((p) => {
            p.y += p.speed * 0.9;
            p.x += Math.sin(p.y * 0.01) * 0.3;
            p.angle += p.rotSpeed;
            if (p.y > canvasH + p.size) {
              p.y = -p.size;
              p.x = Math.random() * canvasW;
            }
            ctx.save();
            ctx.translate(p.x, p.y);
            ctx.rotate(p.angle);
            ctx.globalAlpha = p.opacity;
            ctx.shadowColor = "rgba(255,80,120,0.5)";
            ctx.shadowBlur = 14;
            ctx.drawImage(p.img, -p.size / 2, -p.size / 2, p.size, p.size);
            ctx.restore();
          });
          animFrame = requestAnimationFrame(drawRain);
        }

        function startRain() {
          resizeCanvas();
          window.addEventListener("resize", resizeCanvas);
          if (particles.length === 0) initRainParticles();
          canvas.classList.remove("hidden");
          if (animFrame) cancelAnimationFrame(animFrame);
          drawRain();
        }

        // ------------------------------------------------------------
        // 7. –î–ê ‚Äî –í–ö–õ–Æ–ß–ê–ï–ú –í–°–Å!
        // ------------------------------------------------------------
        const yesBtn = document.getElementById("yes-btn");
        const valentineScreen = document.getElementById("valentine-screen");
        const successScreen = document.getElementById("success-screen");

        yesBtn.addEventListener("click", async function (e) {
          e.preventDefault();
          // –∑–∞–ø—É—Å–∫–∞–µ–º –º—É–∑—ã–∫—É (—Å–∏–Ω—Ç–µ–∑)
          if (!audioCtx) initAudioContext();
          startSynthMusic();
          document.getElementById("music-toggle").innerHTML = "üîä";
          isMusicPlaying = true;

          valentineScreen.classList.add("hidden");
          successScreen.classList.remove("hidden");
          document.body.style.background =
            "linear-gradient(145deg, #ff9aae, #ffc0cb, #ffe4e1)";

          // –¥–æ–∂–¥—å
          setTimeout(() => startRain(), 200);
          // –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
          for (let i = 0; i < 15; i++) {
            setTimeout(() => {
              const conf = document.createElement("div");
              conf.innerHTML = "‚ù§Ô∏èüß°üíõüíöüíôüíú";
              conf.style.position = "fixed";
              conf.style.left = Math.random() * 100 + "%";
              conf.style.top = "-20px";
              conf.style.fontSize = 30 + Math.random() * 40 + "px";
              conf.style.zIndex = "9999";
              conf.style.pointerEvents = "none";
              conf.style.animation = `fall ${2 + Math.random() * 3}s linear forwards`;
              document.body.appendChild(conf);
              setTimeout(() => conf.remove(), 5000);
            }, i * 60);
          }
        });

        // –∫–ª—é—á–µ–≤—ã–µ –∫–∞–¥—Ä—ã –¥–ª—è fall
        const style = document.createElement("style");
        style.textContent = `@keyframes fall { 0%{transform:translateY(0) rotate(0deg); opacity:1;} 100%{transform:translateY(100vh) rotate(720deg); opacity:0;} }`;
        document.head.appendChild(style);

        // ------------------------------------------------------------
        // 8. –ó–ê–ì–†–£–ó–ö–ê –í–°–ï–ì–û –ü–†–ò –°–¢–ê–†–¢–ï
        // ------------------------------------------------------------
        window.addEventListener("load", async () => {
          // –∑–∞–≥—Ä—É–∂–∞–µ–º —Ñ–æ—Ç–æ
          const photoPromises = [];
          for (let i = 1; i <= PHOTO_COUNT; i++) {
            photoPromises.push(
              loadPhoto(i).then((img) => (loadedPhotos[i - 1] = img)),
            );
          }
          await Promise.all(photoPromises);
          console.log("‚úÖ –í—Å–µ —Ñ–æ—Ç–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã");

          // –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–µ—Ä–¥–µ—á–∫–∏
          for (let i = 0; i < 3; i++) {
            loadedHearts.push(createHeartImage(90 + i * 15));
          }

          // –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∞—É–¥–∏–æ (–±–µ–∑ –∑–∞–ø—É—Å–∫–∞)
          initAudioContext();

          // –∫–Ω–æ–ø–∫–∞ –º—É–∑—ã–∫–∏
          document
            .getElementById("music-toggle")
            .addEventListener("click", toggleMusic);
        });
      })();
    </script>
  </body>
</html>
