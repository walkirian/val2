<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no"
    />
    <title>–ù–∞—Å—Ç—é—à–∫–∞, –±—É–¥—å –º–æ–µ–π –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π ‚ù§Ô∏è</title>
    <style>
      /* ===== –°–ë–†–û–° –ò –ì–õ–û–ë–ê–õ–¨–ù–´–ô –°–¢–ò–õ–¨ ===== */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background: linear-gradient(
          145deg,
          #ffb6c1 0%,
          #ffc0cb 40%,
          #ffe4e1 100%
        );
        font-family: "Segoe UI", "Arial", sans-serif;
        height: 100vh;
        width: 100vw;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        margin: 0;
        transition: background 0.6s ease;
      }

      /* ===== –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ô–ù–ï–† ===== */
      .container {
        position: relative;
        z-index: 20;
        max-width: 750px;
        width: 90%;
        text-align: center;
      }

      /* ===== –≠–ö–†–ê–ù–´ ===== */
      .screen {
        background: rgba(255, 240, 245, 0.7);
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
        border-radius: 60px 20px 60px 20px;
        padding: 3rem 2rem;
        box-shadow:
          0 20px 40px rgba(190, 80, 100, 0.25),
          inset 0 2px 6px rgba(255, 255, 255, 0.8);
        border: 1px solid rgba(245, 220, 220, 0.5);
        transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
      }

      .hidden {
        display: none !important;
      }

      /* ===== –¢–ï–ö–°–¢ ===== */
      h1 {
        font-size: clamp(2.2rem, 8vw, 3.4rem);
        font-weight: 700;
        color: #a52a2a;
        text-shadow:
          3px 3px 0 rgba(255, 200, 200, 0.6),
          0 4px 12px rgba(255, 105, 180, 0.3);
        letter-spacing: 2px;
        margin-bottom: 40px;
        word-break: break-word;
      }

      #success-screen h1 {
        margin-bottom: 0;
        animation: glitch 0.6s infinite alternate;
      }

      @keyframes glitch {
        0% {
          transform: skew(0deg, 0deg);
          opacity: 1;
          text-shadow: 3px 3px 0 #ffa07a;
        }
        100% {
          transform: skew(-2deg, 1deg);
          opacity: 0.95;
          text-shadow: 6px 6px 0 #ff69b4;
        }
      }

      /* ===== –ö–ù–û–ü–ö–ò ===== */
      .buttons {
        position: relative;
        width: 100%;
        height: 80px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 20px;
      }

      .btn {
        position: absolute;
        padding: 14px 40px;
        font-size: 1.8rem;
        font-weight: bold;
        border: none;
        border-radius: 60px;
        cursor: pointer;
        transition: all 0.25s ease;
        box-shadow:
          0 12px 0 rgba(0, 0, 0, 0.1),
          0 8px 18px rgba(160, 60, 80, 0.3);
        letter-spacing: 4px;
        border: 2px solid rgba(255, 255, 255, 0.7);
        width: auto;
        min-width: 140px;
      }

      .yes {
        background: #ff3b4a;
        color: white;
        left: 10%;
        background: linear-gradient(145deg, #ff4f4f, #d62b3a);
      }

      .no {
        background: #b0b0b0;
        color: white;
        left: 60%;
        background: linear-gradient(145deg, #9c9c9c, #707070);
        transition: all 0.2s cubic-bezier(0.25, 0.1, 0.25, 1.5);
      }

      .btn:hover {
        transform: scale(1.08);
        filter: brightness(1.1);
      }

      .yes:active {
        transform: scale(0.96);
        box-shadow: 0 6px 0 rgba(0, 0, 0, 0.1);
      }

      /* ===== –ö–ê–ù–í–ê–° –î–õ–Ø –î–û–ñ–î–Ø (–§–û–¢–û+–°–ï–†–î–¶–ê) ===== */
      #rain-canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 10;
        display: block;
      }

      /* ===== –ö–ù–û–ü–ö–ê –£–ü–†–ê–í–õ–ï–ù–ò–Ø –ú–£–ó–´–ö–û–ô ===== */
      .music-control {
        position: fixed;
        bottom: 25px;
        right: 25px;
        width: 55px;
        height: 55px;
        background: rgba(255, 200, 210, 0.75);
        backdrop-filter: blur(8px);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 32px;
        cursor: pointer;
        z-index: 100;
        box-shadow: 0 6px 18px rgba(190, 60, 80, 0.3);
        border: 2px solid rgba(255, 255, 255, 0.8);
        transition: 0.2s;
        user-select: none;
      }
      .music-control:hover {
        transform: scale(1.1);
        background: rgba(255, 160, 180, 0.9);
      }
      .music-control.muted {
        opacity: 0.7;
      }

      /* ===== –ê–î–ê–ü–¢–ê–¶–ò–Ø –ü–û–î –¢–ï–õ–ï–§–û–ù–´ ===== */
      @media (max-width: 600px) {
        .screen {
          padding: 2rem 1rem;
        }
        .btn {
          padding: 12px 25px;
          font-size: 1.5rem;
          min-width: 120px;
        }
        h1 {
          font-size: 2rem;
        }
        .music-control {
          width: 48px;
          height: 48px;
          font-size: 28px;
          bottom: 15px;
          right: 15px;
        }
      }

      /* ===== –ê–ù–ò–ú–ê–¶–ò–Ø –î–õ–Ø –ö–†–ï–°–¢–ò–ö–û–í (–ö–ù–û–ü–ö–ê –ù–ï–¢) ===== */
      .cross {
        position: fixed;
        color: #ff4444;
        font-size: 35px;
        font-weight: bold;
        text-shadow: 0 0 10px rgba(255, 0, 0, 0.7);
        z-index: 9999;
        pointer-events: none;
        animation: crossFall 2.5s linear forwards;
        user-select: none;
      }

      @keyframes crossFall {
        0% {
          transform: translateY(0) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translateY(100vh) rotate(360deg);
          opacity: 0;
        }
      }
    </style>
  </head>
  <body>
    <!-- ===== –§–û–ù–û–í–ê–Ø –ú–£–ó–´–ö–ê ===== -->
    <!-- 
    –†–æ–º–∞–Ω—Ç–∏—á–Ω–∞—è —Ñ–æ—Ä—Ç–µ–ø–∏–∞–Ω–Ω–∞—è –º–µ–ª–æ–¥–∏—è. 
    üîπ –•–æ—á–µ—à—å –¥—Ä—É–≥—É—é? –ü—Ä–æ—Å—Ç–æ –∑–∞–º–µ–Ω–∏ —Å—Å—ã–ª–∫—É –Ω–∞ —Å–≤–æ–π —Ñ–∞–π–ª .mp3 
      (–º–æ–∂–Ω–æ –ø–æ–ª–æ–∂–∏—Ç—å music.mp3 —Ä—è–¥–æ–º —Å index.html –∏ –Ω–∞–ø–∏—Å–∞—Ç—å src="music.mp3")
  -->
    <audio id="bg-music" loop preload="auto">
      <source
        src="https://www.bensound.com/bensound-music/bensound-romantic.mp3"
        type="audio/mpeg"
      />
      –¢–≤–æ–π –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ :(
    </audio>

    <!-- –ö–ù–û–ü–ö–ê –í–ö–õ/–í–´–ö–õ –ó–í–£–ö–ê -->
    <div id="music-toggle" class="music-control" title="–í–∫–ª/–í—ã–∫–ª –º—É–∑—ã–∫—É">
      üîä
    </div>

    <!-- –û–°–ù–û–í–ù–û–ô –ò–ù–¢–ï–†–§–ï–ô–° -->
    <div class="container">
      <!-- –≠–ö–†–ê–ù –í–ê–õ–ï–ù–¢–ò–ù–ö–ò -->
      <div id="valentine-screen" class="screen">
        <h1>‚ù§Ô∏è –ù–∞—Å—Ç—é—à–∫–∞,<br />–±—É–¥–µ—à—å –º–æ–µ–π –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π?</h1>
        <div class="buttons" id="button-container">
          <button id="yes-btn" class="btn yes">–î–ê</button>
          <button id="no-btn" class="btn no">–ù–ï–¢</button>
        </div>
      </div>

      <!-- –≠–ö–†–ê–ù –£–°–ü–ï–•–ê (–ü–û–°–õ–ï –î–ê) -->
      <div id="success-screen" class="screen hidden">
        <h1>üéâ –£–†–ê!!!!!!!!! üéâ</h1>
      </div>
    </div>

    <!-- –ö–ê–ù–í–ê–° –î–õ–Ø –î–û–ñ–î–Ø –ò–ó –§–û–¢–û –ò –°–ï–†–î–ï–¶ -->
    <canvas id="rain-canvas" class="hidden"></canvas>

    <script>
      (function () {
        "use strict";

        // --------------------------------------------------------------
        // 1. –¢–í–û–ò –§–û–¢–û–ì–†–ê–§–ò–ò ‚Äî 30 –®–¢–£–ö –ò–ó –ü–ê–ü–ö–ò /photos
        // --------------------------------------------------------------
        const PHOTO_PATHS = [];
        for (let i = 1; i <= 30; i++) {
          PHOTO_PATHS.push(`photos/${i}.jpg`); // —Ñ–æ—Ç–æ –ª–µ–∂–∞—Ç –≤ –ø–∞–ø–∫–µ photos, –∏–º–µ–Ω–∞ 1.jpg ... 30.jpg
        }

        // --------------------------------------------------------------
        // 2. –°–ï–†–î–ï–ß–ö–ò ‚Äî –ì–ï–ù–ï–†–ò–†–£–ï–ú –ü–†–Ø–ú–û –í –ö–û–î–ï (–ö–†–ê–°–ò–í–´–ï, –ë–ï–ó –°–°–´–õ–û–ö)
        // --------------------------------------------------------------
        const HEART_COUNT = 3; // —Ç—Ä–∏ —Ä–∞–∑–Ω—ã—Ö –≤–∞—Ä–∏–∞—Ü–∏–∏

        // --------------------------------------------------------------
        // 3. –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï
        // --------------------------------------------------------------
        const canvas = document.getElementById("rain-canvas");
        const ctx = canvas.getContext("2d");
        const valentineScreen = document.getElementById("valentine-screen");
        const successScreen = document.getElementById("success-screen");
        const yesBtn = document.getElementById("yes-btn");
        const noBtn = document.getElementById("no-btn");
        const btnContainer = document.getElementById("button-container");
        const bgMusic = document.getElementById("bg-music");
        const musicToggle = document.getElementById("music-toggle");

        // –ú–∞—Å—Å–∏–≤—ã –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        let loadedPhotos = [];
        let loadedHearts = [];

        // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ–∂–¥—è (—Ñ–æ—Ç–æ+—Å–µ—Ä–¥—Ü–∞)
        let particles = [];
        let animationFrame = null;
        let canvasWidth, canvasHeight;

        // –§–ª–∞–≥, –ø—ã—Ç–∞–ª–∏—Å—å –ª–∏ —É–∂–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –º—É–∑—ã–∫—É (—á—Ç–æ–±—ã –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å)
        let musicStarted = false;
        let isMusicMuted = false; // –¥–ª—è –∫–Ω–æ–ø–∫–∏ –¥–∏–Ω–∞–º–∏–∫–∞

        // --------------------------------------------------------------
        // 4. –ì–ï–ù–ï–†–ê–¶–ò–Ø –°–ï–†–î–ï–ß–ö–ê –ß–ï–†–ï–ó CANVAS (–í–ï–ö–¢–û–†–ù–û–ï)
        // --------------------------------------------------------------
        function createHeartImage(w, h) {
          const canvas = document.createElement("canvas");
          canvas.width = w;
          canvas.height = h;
          const cctx = canvas.getContext("2d");

          // –û—Å–Ω–æ–≤–Ω–æ–µ —Å–µ—Ä–¥–µ—á–∫–æ
          cctx.fillStyle = "#ff4d6d";
          cctx.shadowColor = "#ffb3c6";
          cctx.shadowBlur = 12;
          cctx.beginPath();
          cctx.moveTo(w / 2, h / 4);
          cctx.bezierCurveTo(
            w / 2 - w / 4,
            h / 6,
            0,
            h / 2.5,
            w / 2,
            h - h / 8,
          );
          cctx.bezierCurveTo(w, h / 2.5, w - w / 4, h / 6, w / 2, h / 4);
          cctx.closePath();
          cctx.fill();

          // –ë–ª–∏–∫
          cctx.shadowBlur = 6;
          cctx.fillStyle = "#ff8c9a";
          cctx.beginPath();
          cctx.moveTo(w / 2.3, h / 3.2);
          cctx.bezierCurveTo(
            w / 2.6,
            h / 4.5,
            w / 3.2,
            h / 4,
            w / 2.2,
            h / 3.8,
          );
          cctx.fill();

          const img = new Image();
          img.src = canvas.toDataURL("image/png");
          return img;
        }

        // --------------------------------------------------------------
        // 5. –ü–†–ï–î–ó–ê–ì–†–£–ó–ö–ê –§–û–¢–û + –°–û–ó–î–ê–ù–ò–ï –°–ï–†–î–ï–¶
        // --------------------------------------------------------------
        function preloadImages() {
          // ---- –§–æ—Ç–æ (–∏–∑ –ø–∞–ø–∫–∏ photos) ----
          PHOTO_PATHS.forEach((path, index) => {
            const img = new Image();
            img.src = path;
            img.onload = () => {
              loadedPhotos[index] = img;
              if (loadedPhotos.filter(Boolean).length === PHOTO_PATHS.length) {
                console.log("‚úÖ –í—Å–µ —Ñ–æ—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã");
              }
            };
            img.onerror = () => {
              console.warn(`‚ö†Ô∏è –§–æ—Ç–æ ${path} –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–æ—Å—å, —Å–æ–∑–¥–∞—é –∑–∞–≥–ª—É—à–∫—É`);
              // –ö—Ä–∞—Å–∏–≤–∞—è –∑–∞–≥–ª—É—à–∫–∞ —Å –∏–Ω–∏—Ü–∏–∞–ª–∞–º–∏
              loadedPhotos[index] = createFallbackImage(
                120,
                120,
                `‚ù§Ô∏è`,
                "#ff6b81",
              );
            };
          });

          // ---- –°–µ—Ä–¥–µ—á–∫–∏: —Å—Ä–∞–∑—É –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º 3 —à—Ç—É–∫–∏ (–±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤) ----
          for (let i = 0; i < HEART_COUNT; i++) {
            // –ù–µ–º–Ω–æ–≥–æ —Ä–∞–∑–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –∏ –æ—Ç—Ç–µ–Ω–∫–∏ –¥–ª—è —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è
            const size = 90 + i * 10;
            const heartImg = createHeartImage(size, size);
            loadedHearts[i] = heartImg;
          }
          console.log("‚úÖ –°–µ—Ä–¥–µ—á–∫–∏ —Å–æ–∑–¥–∞–Ω—ã");
        }

        // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Ñ–æ—Ç–æ (–µ—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω)
        function createFallbackImage(w, h, text, color) {
          const canvas = document.createElement("canvas");
          canvas.width = w;
          canvas.height = h;
          const cctx = canvas.getContext("2d");
          cctx.beginPath();
          cctx.arc(w / 2, h / 2, w / 2.5, 0, Math.PI * 2);
          cctx.fillStyle = color;
          cctx.shadowColor = "rgba(255, 100, 150, 0.7)";
          cctx.shadowBlur = 12;
          cctx.fill();
          cctx.shadowBlur = 0;
          cctx.fillStyle = "white";
          cctx.font = 'bold 40px "Segoe UI", Arial';
          cctx.textAlign = "center";
          cctx.textBaseline = "middle";
          cctx.fillText(text, w / 2, h / 2);
          const img = new Image();
          img.src = canvas.toDataURL("image/png");
          return img;
        }

        // --------------------------------------------------------------
        // 6. –£–ë–ï–ì–ê–Æ–©–ê–Ø –ö–ù–û–ü–ö–ê –ù–ï–¢ + –ö–†–ï–°–¢–ò–ö–ò –ü–†–ò –ù–ê–ñ–ê–¢–ò–ò
        // --------------------------------------------------------------
        function moveNoButton() {
          if (!btnContainer) return;
          const containerRect = btnContainer.getBoundingClientRect();
          const btnRect = noBtn.getBoundingClientRect();

          const btnWidth = btnRect.width;
          const btnHeight = btnRect.height;

          const maxLeft = Math.max(0, containerRect.width - btnWidth);
          const maxTop = Math.max(0, containerRect.height - btnHeight);

          let newLeft = Math.random() * maxLeft;
          let newTop = Math.random() * maxTop;

          newLeft = Math.min(newLeft, maxLeft);
          newTop = Math.min(newTop, maxTop);

          noBtn.style.position = "absolute";
          noBtn.style.left = newLeft + "px";
          noBtn.style.top = newTop + "px";
          noBtn.style.right = "auto";
          noBtn.style.bottom = "auto";
        }

        // ---- –≠–§–§–ï–ö–¢: –¢–´–°–Ø–ß–ò –ö–†–ï–°–¢–ò–ö–û–í –ü–†–ò –ö–õ–ò–ö–ï –ù–ê –ù–ï–¢ ----
        function spawnCrosses() {
          const count = 60 + Math.floor(Math.random() * 40); // 60‚Äì100 –∫—Ä–µ—Å—Ç–∏–∫–æ–≤
          for (let i = 0; i < count; i++) {
            const cross = document.createElement("div");
            cross.className = "cross";
            cross.innerHTML = "‚ùå";
            cross.style.left = Math.random() * 100 + "%";
            cross.style.top = -20 + "px";
            cross.style.fontSize = 25 + Math.floor(Math.random() * 40) + "px";
            cross.style.animationDuration = 1.8 + Math.random() * 2 + "s";
            cross.style.animationDelay = Math.random() * 0.5 + "s";
            document.body.appendChild(cross);

            setTimeout(() => {
              cross.remove();
            }, 3000);
          }
        }

        noBtn.addEventListener("mouseenter", moveNoButton);
        noBtn.addEventListener(
          "touchstart",
          (e) => {
            e.preventDefault();
            moveNoButton();
          },
          { passive: false },
        );

        noBtn.addEventListener("click", (e) => {
          e.preventDefault();
          e.stopPropagation();
          moveNoButton();
          spawnCrosses(); // üéØ –≤–∑—Ä—ã–≤ –∫—Ä–µ—Å—Ç–∏–∫–æ–≤!
          return false;
        });

        // --------------------------------------------------------------
        // 7. –£–ü–†–ê–í–õ–ï–ù–ò–ï –ú–£–ó–´–ö–û–ô
        // --------------------------------------------------------------
        function startMusic() {
          if (musicStarted) return;
          musicStarted = true;
          bgMusic
            .play()
            .then(() => {
              console.log("üéµ –ú—É–∑—ã–∫–∞ –∏–≥—Ä–∞–µ—Ç");
              musicToggle.innerHTML = "üîä"; // –∏–∫–æ–Ω–∫–∞ –∑–≤—É–∫–∞
              isMusicMuted = false;
            })
            .catch((err) => {
              console.warn("‚ö†Ô∏è –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –º—É–∑—ã–∫–∏ –Ω–µ —É–¥–∞–ª—Å—è:", err);
              musicStarted = false; // —Ä–∞–∑—Ä–µ—à–∏–º –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –î–ê
              // –í—Å—ë —Ä–∞–≤–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–∫–æ–Ω–∫—É, –Ω–æ –º—É–∑—ã–∫—É –Ω–µ –≤–∫–ª—é—á–∏–ª–∏ ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–º–æ–∂–µ—Ç –≤–∫–ª—é—á–∏—Ç—å –≤—Ä—É—á–Ω—É—é
            });
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ mute/unmute
        function toggleMusic() {
          if (bgMusic.paused) {
            bgMusic
              .play()
              .catch((e) => console.warn("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É", e));
            musicToggle.innerHTML = "üîä";
            isMusicMuted = false;
            musicStarted = true;
          } else {
            if (bgMusic.muted) {
              bgMusic.muted = false;
              musicToggle.innerHTML = "üîä";
              isMusicMuted = false;
            } else {
              bgMusic.muted = true;
              musicToggle.innerHTML = "üîá";
              isMusicMuted = true;
            }
          }
        }

        musicToggle.addEventListener("click", toggleMusic);

        // --------------------------------------------------------------
        // 8. –î–û–ñ–î–¨ –ò–ó –§–û–¢–û –ò –°–ï–†–î–ï–ß–ï–ö (–ü–û–°–õ–ï –ù–ê–ñ–ê–¢–ò–Ø –î–ê)
        // --------------------------------------------------------------
        function initRainParticles() {
          particles = [];
          const allImages = [...loadedPhotos, ...loadedHearts].filter(
            (img) => img && img.complete && img.naturalHeight > 0,
          );

          // –ï—Å–ª–∏ –≤—Å—ë –µ—â—ë –Ω–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–∞–ø–∞—Å–Ω—ã–µ —Å–µ—Ä–¥–µ—á–∫–∏
          let fallbackArray = allImages;
          if (fallbackArray.length === 0) {
            fallbackArray = [
              createHeartImage(80, 80),
              createHeartImage(90, 90),
              createHeartImage(100, 100),
            ];
          }

          const count = 70 + Math.floor(Math.random() * 40); // 70‚Äì110 —á–∞—Å—Ç–∏—Ü
          for (let i = 0; i < count; i++) {
            const img =
              fallbackArray[Math.floor(Math.random() * fallbackArray.length)];
            const size = 50 + Math.floor(Math.random() * 70); // 50‚Äì120px
            particles.push({
              img: img,
              x: Math.random() * canvasWidth,
              y: Math.random() * canvasHeight - canvasHeight,
              speed: 1.2 + Math.random() * 4,
              size: size,
              angle: Math.random() * Math.PI * 2,
              rotationSpeed: (Math.random() - 0.5) * 0.02,
              opacity: 0.75 + Math.random() * 0.25,
            });
          }
        }

        function drawRain() {
          if (!canvas || canvas.classList.contains("hidden")) return;

          ctx.clearRect(0, 0, canvasWidth, canvasHeight);

          particles.forEach((p) => {
            p.y += p.speed * 0.8;
            p.x += Math.sin(p.y * 0.01) * 0.4;
            p.angle += p.rotationSpeed;

            if (p.y > canvasHeight + p.size) {
              p.y = -p.size;
              p.x = Math.random() * canvasWidth;
              p.speed = 1.2 + Math.random() * 4;
            }

            ctx.save();
            ctx.translate(p.x, p.y);
            ctx.rotate(p.angle);
            ctx.globalAlpha = p.opacity;
            ctx.shadowColor = "rgba(255, 105, 180, 0.6)";
            ctx.shadowBlur = 12;
            ctx.drawImage(p.img, -p.size / 2, -p.size / 2, p.size, p.size);
            ctx.restore();
          });

          animationFrame = requestAnimationFrame(drawRain);
        }

        function startRain() {
          if (!canvas) return;

          resizeCanvas();
          window.addEventListener("resize", resizeCanvas);

          if (particles.length === 0) {
            initRainParticles();
          }

          canvas.classList.remove("hidden");
          if (animationFrame) cancelAnimationFrame(animationFrame);
          drawRain();
        }

        function resizeCanvas() {
          canvasWidth = window.innerWidth;
          canvasHeight = window.innerHeight;
          canvas.width = canvasWidth;
          canvas.height = canvasHeight;
        }

        // --------------------------------------------------------------
        // 9. –ù–ê–ñ–ê–¢–ò–ï –ù–ê –î–ê ‚Äî –ì–õ–ê–í–ù–û–ï –í–û–õ–®–ï–ë–°–¢–í–û (–ú–£–ó–´–ö–ê + –î–û–ñ–î–¨)
        // --------------------------------------------------------------
        yesBtn.addEventListener("click", function (e) {
          e.preventDefault();

          // –í–∫–ª—é—á–∞–µ–º —Ä–æ–º–∞–Ω—Ç–∏—á–Ω—É—é –º—É–∑—ã–∫—É
          startMusic();

          // –°–∫—Ä—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω —Å –≤–æ–ø—Ä–æ—Å–æ–º, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –£–†–ê!
          valentineScreen.classList.add("hidden");
          successScreen.classList.remove("hidden");

          // –ú–µ–Ω—è–µ–º —Ñ–æ–Ω –Ω–∞ –±–æ–ª–µ–µ –Ω–∞—Å—ã—â–µ–Ω–Ω—ã–π
          document.body.style.background =
            "linear-gradient(145deg, #ff9aae, #ffc0cb, #ffe4e1)";

          // –ó–∞–ø—É—Å–∫–∞–µ–º –¥–æ–∂–¥—å (—Ñ–æ—Ç–æ + —Å–µ—Ä–¥–µ—á–∫–∏)
          setTimeout(() => {
            startRain();
          }, 200);

          // –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ –∏–∑ —Å–µ—Ä–¥–µ—á–µ–∫
          for (let i = 0; i < 12; i++) {
            setTimeout(() => {
              createConfettiHeart();
            }, i * 70);
          }
        });

        // ---- –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ –∏–∑ —Å–µ—Ä–¥–µ—á–µ–∫ (–±–æ–Ω—É—Å) ----
        function createConfettiHeart() {
          const confetti = document.createElement("div");
          confetti.innerHTML = "‚ù§Ô∏èüß°üíõüíöüíôüíú";
          confetti.style.position = "fixed";
          confetti.style.left = Math.random() * 100 + "%";
          confetti.style.top = "-20px";
          confetti.style.fontSize = 25 + Math.random() * 35 + "px";
          confetti.style.zIndex = "9999";
          confetti.style.pointerEvents = "none";
          confetti.style.animation = `fall ${2.5 + Math.random() * 3}s linear forwards`;
          document.body.appendChild(confetti);
          setTimeout(() => confetti.remove(), 5000);
        }

        // --------------------------------------------------------------
        // 10. –î–û–ë–ê–í–õ–Ø–ï–ú KEYFRAMES –î–õ–Ø –ö–û–ù–§–ï–¢–¢–ò (–ï–°–õ–ò –û–¢–°–£–¢–°–¢–í–£–Æ–¢)
        // --------------------------------------------------------------
        if (!document.querySelector("#fall-keyframes")) {
          const styleSheet = document.createElement("style");
          styleSheet.id = "fall-keyframes";
          styleSheet.textContent = `
          @keyframes fall {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
          }
        `;
          document.head.appendChild(styleSheet);
        }

        // --------------------------------------------------------------
        // 11. –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
        // --------------------------------------------------------------
        window.addEventListener("load", function () {
          preloadImages();

          // –ù–∞—á–∞–ª—å–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –ù–ï–¢
          noBtn.style.left = "60%";
          noBtn.style.top = "0px";

          // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∂–∞–µ–º –º—É–∑—ã–∫—É, –Ω–æ –Ω–µ –∏–≥—Ä–∞–µ–º (–∂–¥—ë–º –∫–ª–∏–∫–∞)
          bgMusic.load();

          // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–Ω–µ—Ç –ø–æ –∫–Ω–æ–ø–∫–µ –¥–∏–Ω–∞–º–∏–∫–∞ –¥–æ –î–ê, –≤–∫–ª—é—á–∏—Ç—Å—è –º—É–∑—ã–∫–∞
          // (–Ω–µ –∂–¥—ë–º —Ç–æ–ª—å–∫–æ –î–ê)
        });
      })();
    </script>
  </body>
</html>
